!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("difflib"),require("vkbeautify"),require("x2js")):"function"==typeof define&&define.amd?define("jasmine-snapshot",["difflib","vkbeautify","x2js"],n):"object"==typeof exports?exports["jasmine-snapshot"]=n(require("difflib"),require("vkbeautify"),require("x2js")):t["jasmine-snapshot"]=n(t.difflib,t.vkbeautify,t.x2js)}(this,function(t,n,e){return function(t){function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}var e={};return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:o})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=3)}([function(n,e){n.exports=t},function(t,e){t.exports=n},function(t,n){t.exports=e},function(t,n,e){"use strict";function o(){var t="\n**** If actual is valid, update your snapshot with the following ****\n{",n=!1;for(var e in g)n=!0,t+='\n\t"'+e+'": `'+g[e]+"`,";n&&(t=t.slice(0,t.length-1),t+="\n}\n\n"),console.error(t)}function r(t){S=t,O=j}function i(t){var n=u(t),e=w+" "+ ++b;g[e]=n;var o=S[e];return o||""}function a(){n.KeyExceptionList=["typeof"]}function s(t,n,e){if(n!==t){var o=y.default.unifiedDiff(t.split("\n"),n.split("\n")),r="\n";if(r+="**** "+w+" diff *****\n\n",o.forEach(function(t){"--- \n"===t||"+++ \n"===t||t.length>5&&"@@"===t.slice(0,2)||(r+=t+"\n")}),r+="\n",!e){var i=u(n);r+="**** If the Actual is valid, update the snapshot with this ****\n",r+=" ----- Formatted ------\n"+n+"\n\n ----- Single Line ------\n"+i}console.error(r),fail("Actual does not match snapshot. See above. ")}}function u(t){for(var n=t.replace(/\n/g,"").replace(/\t/g,"");-1!==n.indexOf("  ");)n=n.replace(/(  )/g," ");return n}function c(t,n){h(n).toMatchSnapshot(t)}function f(t,n){var e=n?v.json(n):n;s(t?v.json(t):t,e)}function p(t,n){l(n).toMatchSnapshot(t)}function l(t){return new _(t)}function h(t){return new M(t)}var d=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])};return function(n,e){function o(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var y=e(0),v=e(1),x=e(2),w="",j=0;jasmine.getEnv().addReporter({suiteStarted:function(t){j++},specStarted:function(t){w=t.fullName},suiteDone:function(t){--j<O&&(O=0,S={},o())}});var S={},g={},O=0;n.registerSnapshots=r;var b=0;n.KeyExceptionList=["typeof"],n.ResetExceptionList=a,n.MatchesSnapshot=s,n.MatchesXMLSnapshot=c,n.MatchesJSONSnapshot=f,n.MatchesJSSnapshot=p,n.expectjs=l,n.expectxml=h;var m=function(){function t(t){this.actual=t}return t.prototype.afterApplying=function(t){return this.actual=t(this.actual),this},t}(),_=function(t){function e(n){var e=t.call(this,n)||this;return e.parsed_values=new Array,e.actual=n,e}return d(e,t),e.prototype.toMatchSnapshot=function(t){var n=this.actual?v.json(this.getOrderedStringifyAndClean()):"",e=t;if(null===t||void 0===t){var o=i(n);e=o?v.json(o):""}else e=t?v.json(t):t;s(e,n,!0)},e.prototype.getOrderedStringifyAndClean=function(){var t=this.collectAllKeysAndRemoveCircular(this.actual);return JSON.stringify(this.actual,t)},e.prototype.collectAllKeysAndRemoveCircular=function(t){var n=this,e=new Array,o=JSON.stringify(t,function(t,o){if(!n.isIEPooOrCurcularReferences(t,o))return e.push(t),o});return this.actual=JSON.parse(o),e.sort(function(t,n){return t>n?1:-1})},e.prototype.isIEPooOrCurcularReferences=function(t,e){return!("string"!=typeof t||!n.KeyExceptionList.some(function(n){return-1!==t.indexOf(n)}))||!!this.IsCurcularDependency(e)},e.prototype.IsCurcularDependency=function(t){return!(!t||"object"!=typeof t)&&(-1!==this.parsed_values.indexOf(t)||(this.parsed_values.push(t),!1))},e}(m);n.SnapshotJSInner=_;var M=function(t){function n(n){var e=t.call(this,n)||this;return e.actual=n,e}return d(n,t),n.prototype.toMatchSnapshot=function(t){l((new x).xml2js(this.actual)).toMatchSnapshot(t)},n}(m);n.SnapshotXMLInner=M;var A=window.console.warn;window.console.warn=function(){arguments.length>0&&"string"==typeof arguments[0]&&-1!==arguments[0].indexOf("[xmldom ")||A.apply(window.console,arguments)};var C=window.console.error;window.console.error=function(){arguments.length>0&&"string"==typeof arguments[0]&&-1!==arguments[0].indexOf("entity not found")||C.apply(window.console,arguments)}}])});